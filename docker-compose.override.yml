# Development overrides - automatically merged with docker-compose.yml
# Usage: docker-compose up (override is applied automatically)

services:
  app:
    build:
      target: base  # Use base image instead of full build
    command: sh -c "pnpm install && npx prisma generate && pnpm dev"
    environment:
      NODE_ENV: development
    volumes:
      # Mount source code for hot reload
      - .:/app
      # Preserve node_modules from container (avoid OS-specific binaries)
      - /app/node_modules
      - /app/.next
    # Faster restart for dev
    restart: "no"
